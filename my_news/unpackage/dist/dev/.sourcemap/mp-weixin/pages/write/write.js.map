{"version":3,"sources":["webpack:////Users/wuxian/Documents/project/uni_node/my_news/pages/write/write.vue?dc17","webpack:////Users/wuxian/Documents/project/uni_node/my_news/pages/write/write.vue?d051","webpack:////Users/wuxian/Documents/project/uni_node/my_news/pages/write/write.vue?1cc4","webpack:////Users/wuxian/Documents/project/uni_node/my_news/pages/write/write.vue?b691","webpack:////Users/wuxian/Documents/project/uni_node/my_news/pages/write/write.vue","webpack:////Users/wuxian/Documents/project/uni_node/my_news/pages/write/write.vue?1bec","webpack:////Users/wuxian/Documents/project/uni_node/my_news/pages/write/write.vue?7f53"],"names":["artId","data","view","txtCon","needUploadImg","title","iptList","selCateIndex","cateList","name","_id","onLoad","options","console","log","id","loginRes","checkLogin","uni","request","url","apiBasic","method","header","getStorageSync","success","res","JSON","parse","description","setCateInfo","cate_id","fail","complete","methods","findIndex","value","index","bindPickerChange","e","target","formSubmit","item","type","content","push","length","formReset","delItem","showModal","confirm","splice","save","forEach","match","tmpUrl","showLoading","mask","uploadedLength","uploadFile","filePath","viewDomain","path","hideLoading","saveTo","stringify","user_id","showToast","redirectTo","error","imgSel","chooseImage","count","tempFilePaths"],"mappings":"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","file":"pages/write/write.js","sourcesContent":["import { render, staticRenderFns } from \"./write.vue?vue&type=template&id=3d9ad690&\"\nimport script from \"./write.vue?vue&type=script&lang=js&\"\nexport * from \"./write.vue?vue&type=script&lang=js&\"\nimport style0 from \"./write.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('3d9ad690', component.options)\n    } else {\n      api.reload('3d9ad690', component.options)\n    }\n    module.hot.accept(\"./write.vue?vue&type=template&id=3d9ad690&\", function () {\n      api.rerender('3d9ad690', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"Users/wuxian/Documents/project/uni_node/my_news/pages/write/write.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./write.vue?vue&type=template&id=3d9ad690&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./write.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./write.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nvar artId;\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tview: 'item_0',\n\t\t\ttxtCon: '',\n\t\t\tneedUploadImg:[],//需要上传的图片列表\n\t\t\t\n\t\t\ttitle:'',\n\t\t\tiptList: [],\n\t\t\t\n\t\t\tselCateIndex:0,\n\t\t\tcateList:[{\n\t\t\t\tname:'请选择分类',\n\t\t\t\t_id:'-1'\n\t\t\t}] //分类列表\n\t\t};\n\t},\n\t\n\tonLoad(options) {\n\t\tconsole.log(options);\n\t\tartId = options.id;//文章的编号\n\t\t\n\t\t//检测用户是否已经登录\n\t\tlet loginRes = this.checkLogin('../write/write', 1);\n\t\tif (!loginRes) {\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\t//获取文章详细信息\n\t\tif(artId){\n\t\t\t\n\t\t\tuni.request({\n\t\t\t\turl: this.apiBasic + '/article/'+artId,\n\t\t\t\tmethod: 'GET',\n\t\t\t\theader:{\n\t\t\t\t\t'Authorization':'Bearer '+uni.getStorageSync(\"SToken\")\n\t\t\t\t},\n\t\t\t\tsuccess: res => {\n\t\t\t\t\tconsole.log(res);\n\t\t\t\t\tconst data = res.data;\n\t\t\t\t\t\n\t\t\t\t\tthis.title = data.title;\n\t\t\t\t\tthis.iptList = JSON.parse(data.description)\n\t\t\t\t\t\n\t\t\t\t\t//绑定分类\n\t\t\t\t\tthis.setCateInfo(data.cate_id)\n\t\t\t\t\t\n\t\t\t\t},\n\t\t\t\tfail: () => {},\n\t\t\t\tcomplete: () => {}\n\t\t\t});\n\t\t}else{\n\t\t\tthis.setCateInfo();\n\t\t}\n\n\t},\n\tmethods: {\n\t\tsetCateInfo(cate_id){\n\t\t\t//获取文章分类的列表\n\t\t\tuni.request({\n\t\t\t\turl: this.apiBasic + '/cate',\n\t\t\t\tmethod: 'GET',\n\t\t\t\theader:{\n\t\t\t\t\t'Authorization':'Bearer '+uni.getStorageSync(\"SToken\")\n\t\t\t\t},\n\t\t\t\tsuccess: res => {\n\t\t\t\t\tthis.cateList  = [...this.cateList,...res.data];\n\t\t\t\t\t\n\t\t\t\t\tif(cate_id){\n\t\t\t\t\t\tthis.selCateIndex = this.cateList.findIndex((value,index)=>{\n\t\t\t\t\t\t\tif(value._id==cate_id){\n\t\t\t\t\t\t\t\treturn index;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t},\n\t\t\t\tfail: () => {},\n\t\t\t\tcomplete: () => {}\n\t\t\t});\n\t\t},\n\t\tbindPickerChange(e){\n\t\t\tthis.selCateIndex = e.target.value;\n\t\t},\n\t\tformSubmit(e) {\n\t\t\tlet item = {\n\t\t\t\ttype: 'text',\n\t\t\t\tcontent: this.txtCon\n\t\t\t};\n\t\t\tthis.iptList.push(item);\n\t\t\tthis.txtCon = '';\n\t\t\tthis.view = 'item_' + (this.iptList.length - 1);\n\t\t},\n\t\tformReset() {\n\t\t\tthis.txtCon = '';\n\t\t},\n\t\tdelItem(index){\n\t\t\tuni.showModal({\n\t\t\t\ttitle: '提示',\n\t\t\t\tcontent: '确认要删除吗？',\n\t\t\t\tsuccess: res => {\n\t\t\t\t\tif(res.confirm){\n\t\t\t\t\t\tthis.iptList.splice(index,1);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfail: () => {},\n\t\t\t\tcomplete: () => {}\n\t\t\t});\n\t\t},\n\t\tsave(){\n\t\t\t//首先进行文件上传 然后保存数据\n\t\t\t\n\t\t\t//将需要上传的图片的添加到needUploadImg变量中\n\t\t\tthis.iptList.forEach((item,index)=>{\n\t\t\t\tif(item.type==\"image\"){\n\t\t\t\t\tif(item.content.match(/tmp\\//)){\n\t\t\t\t\t\tthis.needUploadImg.push({\n\t\t\t\t\t\t\ttmpUrl:item.content,\n\t\t\t\t\t\t\tindex:index\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\tif(this.needUploadImg.length>0){\n\t\t\t\t\n\t\t\t\tuni.showLoading({\n\t\t\t\t\ttitle: '图片上传中',\n\t\t\t\t\tmask: false\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tlet uploadedLength = 0; //已经上传的文件数\n\t\t\t\tfor (let item of this.needUploadImg) {\n\t\t\t\t\tuni.uploadFile({\n\t\t\t\t\t\turl: this.apiBasic + '/article/picture/upload',\n\t\t\t\t\t\tfilePath:item.tmpUrl,\n\t\t\t\t\t\tname:'image',\n\t\t\t\t\t\theader:{\n\t\t\t\t\t\t\t'Authorization':'Bearer '+uni.getStorageSync(\"SToken\")\n\t\t\t\t\t\t},\n\t\t\t\t\t\tsuccess: (res) => {\n\n\t\t\t\t\t\t\tuploadedLength++;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tconst data = JSON.parse(res.data);\n\t\t\t\t\t\t\tthis.iptList[item.index].content = this.viewDomain + \"/\" + data.path;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(uploadedLength>=this.needUploadImg.length){\n\t\t\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\t\t\t//上传完毕 进行保存\n\t\t\t\t\t\t\t\tthis.saveTo();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.saveTo();\n\t\t\t}\n\t\t},\n\t\t\n\t\tsaveTo(){\n\t\t\tlet url = this.apiBasic + '/article/save'\n\t\t\tif(artId){\n\t\t\t\turl+='/'+artId\n\t\t\t}\n\t\t\t\n\t\t\tuni.showLoading({\n\t\t\t\ttitle: '文件保存中',\n\t\t\t\tmask: false\n\t\t\t});\n\t\t\t\n\t\t\tuni.request({\n\t\t\t\turl: url,\n\t\t\t\tmethod: 'POST',\n\t\t\t\tdata: {\n\t\t\t\t\ttitle:this.title,\n\t\t\t\t\tdescription:JSON.stringify(this.iptList),\n\t\t\t\t\tcate_id:this.cateList[this.selCateIndex]._id,\n\t\t\t\t\tuser_id:uni.getStorageSync(\"SUid\")\n\t\t\t\t},\n\t\t\t\theader:{\n\t\t\t\t\t'Authorization':'Bearer '+uni.getStorageSync(\"SToken\")\n\t\t\t\t},\n\t\t\t\tsuccess: res => {\n\t\t\t\t\tif(res.data.success){\n\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\t//保存成功\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: '保存成功'\n\t\t\t\t\t\t});\n\t\t\t\t\t\t//跳转到文章列表\n\t\t\t\t\t\tuni.redirectTo({\n\t\t\t\t\t\t\turl:'/pages/article_list/article_list'\n\t\t\t\t\t\t})\n\t\t\t\t\t}else{\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: res.data.error\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tconsole.log(res);\n\t\t\t\t},\n\t\t\t\tfail: (error) => {\n\t\t\t\t\tconsole.log(error);\n\t\t\t\t},\n\t\t\t\tcomplete: () => {}\n\t\t\t});\n\t\t},\n\t\t\n\t\timgSel() {\n\t\t\tuni.chooseImage({\n\t\t\t\tcount: 1,\n\t\t\t\tsuccess: res => {\n\t\t\t\t\tlet item = {\n\t\t\t\t\t\ttype: 'image',\n\t\t\t\t\t\tcontent: res.tempFilePaths[0]\n\t\t\t\t\t};\n\t\t\t\t\tthis.iptList.push(item);\n\t\t\t\t\tthis.view = 'item_' + (this.iptList.length - 1);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n};\n","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-4!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./write.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-4!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./write.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}