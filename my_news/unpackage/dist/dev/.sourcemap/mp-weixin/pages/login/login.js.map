{"version":3,"sources":["webpack:////Users/wuxian/Documents/project/uni_node/my_news/pages/login/login.vue?a48e","webpack:////Users/wuxian/Documents/project/uni_node/my_news/pages/login/login.vue?fdc6","webpack:////Users/wuxian/Documents/project/uni_node/my_news/pages/login/login.vue?e98f","webpack:////Users/wuxian/Documents/project/uni_node/my_news/pages/login/login.vue?8f18","webpack:////Users/wuxian/Documents/project/uni_node/my_news/pages/login/login.vue"],"names":["pageOptions","data","appid","secret","openId","onLoad","options","uni","login","success","res","request","url","apiBasic","method","code","openid","fail","complete","methods","getUserInfo","userInfo","detail","showLoading","title","mask","open_id","nick_name","nickName","avatar_url","avatarUrl","gender","showToast","setStorageSync","token","user","_id","backtype","switchTab","backpage","redirectTo"],"mappings":"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","file":"pages/login/login.js","sourcesContent":["import { render, staticRenderFns } from \"./login.vue?vue&type=template&id=56e68a4c&\"\nimport script from \"./login.vue?vue&type=script&lang=js&\"\nexport * from \"./login.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('56e68a4c', component.options)\n    } else {\n      api.reload('56e68a4c', component.options)\n    }\n    module.hot.accept(\"./login.vue?vue&type=template&id=56e68a4c&\", function () {\n      api.rerender('56e68a4c', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"Users/wuxian/Documents/project/uni_node/my_news/pages/login/login.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=template&id=56e68a4c&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n\nvar pageOptions;\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tappid: 'wxf8678b45414a8099',\n\t\t\tsecret: 'be89268e5c03b06c0c8c65d89af0b781',\n\t\t\topenId: ''\n\t\t};\n\t},\n\tonLoad(options) {\n\t\tpageOptions = options;\n\n\n\t\tuni.login({\n\t\t\tsuccess: res => {\n\t\t\t\t// get code\n\t\t\t\tuni.request({\n\t\t\t\t\turl: this.apiBasic + '/wechat/getOpenId',\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tappid: this.appid,\n\t\t\t\t\t\tsecret: this.secret,\n\t\t\t\t\t\tcode: res.code\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: res => {\n\t\t\t\t\t\t// 存储openid\n\t\t\t\t\t\tthis.openId = res.data.openid;\n\t\t\t\t\t},\n\t\t\t\t\tfail: () => {},\n\t\t\t\t\tcomplete: () => {}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\t\n\t},\n\tmethods: {\n\t\tgetUserInfo(res) {\n\t\t\tlet userInfo = res.detail.userInfo; //用户信息\n\n\t\t\tuni.showLoading({\n\t\t\t\ttitle: '登录中',\n\t\t\t\tmask: false\n\t\t\t});\n\t\t\tuni.request({\n\t\t\t\turl: this.apiBasic + '/users/login',\n\t\t\t\tmethod: 'POST',\n\t\t\t\tdata: {\n\t\t\t\t\topen_id: this.openId,\n\t\t\t\t\tnick_name: userInfo.nickName,\n\t\t\t\t\tavatar_url: userInfo.avatarUrl,\n\t\t\t\t\tgender: userInfo.gender\n\t\t\t\t},\n\t\t\t\tsuccess: res => {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '登陆成功'\n\t\t\t\t\t});\n\t\t\t\t\t//将用户的信息保存起来\n\t\t\t\t\tres = res.data;\n\t\t\t\t\tuni.setStorageSync('SOpenId', this.openId);\n\t\t\t\t\tuni.setStorageSync('SToken', res.token);\n\t\t\t\t\tuni.setStorageSync('SUid', res.user._id);\n\t\t\t\t\tuni.setStorageSync('SName', res.user.nick_name);\n\t\t\t\t\tuni.setStorageSync('SAvatar', res.user.avatar_url);\n\t\t\t\t\tif (pageOptions.backtype == 2) {\n\t\t\t\t\t\tuni.switchTab({\n\t\t\t\t\t\t\turl: pageOptions.backpage\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tuni.redirectTo({\n\t\t\t\t\t\t\turl: pageOptions.backpage\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfail: () => {},\n\t\t\t\tcomplete: () => {}\n\t\t\t});\n\t\t}\n\t}\n};\n"],"sourceRoot":""}